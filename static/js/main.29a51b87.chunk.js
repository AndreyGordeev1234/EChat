(this.webpackJsonpechat=this.webpackJsonpechat||[]).push([[0],{51:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){},56:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/message.f1aedf04.mp3"},57:function(e,t,a){},58:function(e,t,a){},59:function(e,t,a){},60:function(e,t,a){},61:function(e,t,a){},62:function(e,t,a){},63:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){},68:function(e,t,a){},69:function(e,t,a){},70:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a(3),s=a.n(r),c=a(26),i=a.n(c),o=a(13),u=a(16),l=a(6),d="FETCH_AUTH_REQUEST",b="FETCH_AUTH_SUCCESS",j="FETCH_AUTH_FAILURE",m="FETCH_AUTH",f="LOAD_USER",g="FETCH_USERS_REQUEST",p="FETCH_USERS_SUCCESS",v="FETCH_USERS_FAILURE",O="FETCH_USERS",_="FETCH_MESSAGES_REQUEST",x="FETCH_MESSAGES_SUCCESS",h="FETCH_MESSAGES_FAILURE",y="FETCH_MESSAGES",E="FETCH_SEND_MESSAGE_REQUEST",S="FETCH_SEND_MESSAGE_SUCCESS",N="FETCH_SEND_MESSAGE_FAILURE",k="FETCH_SEND_MESSAGE",w="ADD_MESSAGE",U="FETCH_DIALOGS_REQUEST",C="FETCH_DIALOGS_SUCCESS",A="FETCH_DIALOGS_FAILURE",T="FETCH_DIALOGS",F=function(e){return{type:j,payload:e}},D=function(e){return{type:v,payload:e}},I=function(e){return{type:w,payload:e}},H=function(e,t){return{type:y,payload:{from:e,to:t}}},L=function(e){return{type:N,payload:e}},M=function(e){return""!==e.trim()},R=(a(51),function(e){Object(u.a)(e);var t=Object(l.c)((function(e){return e.messages.dialog})),a=Object(l.c)((function(e){return e.user.user})),s=Object(r.useState)(""),c=Object(o.a)(s,2),i=c[0],d=c[1],b=Object(l.b)();return Object(n.jsx)("form",{className:"chat__form",onSubmit:function(e){if(e.preventDefault(),M(i)){var n=t.user1.email===(null===a||void 0===a?void 0:a.email)?t.user2.email:t.user1.email;b(function(e,t,a){return{type:k,payload:{from:e,to:t,message:a}}}(a.email,n,i)),d("")}},children:Object(n.jsxs)("p",{className:"chat__fields",children:[Object(n.jsx)("input",{type:"text",name:"message",className:"chat__field",placeholder:"Type a new message...",value:i,onChange:function(e){return d(e.target.value)},autoComplete:"off"}),Object(n.jsx)("button",{type:"submit",className:"chat__submit",disabled:!M(i),children:"Send"})]})})}),G=(a(52),function(e){var t,a=e.isMy,r=void 0!==a&&a,s=e.isFirst,c=void 0!==s&&s,i=e.message,o=e.user;return Object(n.jsxs)("div",{className:function(){var e=["message"];return r||e.push("message_others"),c&&e.push("message_first"),e.join(" ")}(),children:[Object(n.jsx)("p",{className:r?"message__user":"message__user message__user_others",children:o.name}),Object(n.jsxs)("div",{className:"message__main",children:[Object(n.jsxs)("div",{className:r?"message__info":"message__info message__info_others",children:[Object(n.jsx)("p",{className:r?"message__text":"message__text message__text_others",children:i.text}),Object(n.jsx)("time",{className:r?"message__time":"message__time message__time_others",children:(t=i.createdAt.seconds,new Date(1e3*parseInt(t)).toLocaleString())})]}),Object(n.jsx)("div",{className:r?"message__image":"message__image message__image_others",style:{backgroundImage:"url(".concat(null===o||void 0===o?void 0:o.photoUrl,")")}})]})]})}),Q=(a(53),a(9)),W=a.n(Q),B=a(20),P=a(12),V=(a(30),a(36)),X=function(e){Object(u.a)(e);var t=Object(l.c)((function(e){return e.messages.dialog})),s=Object(l.c)((function(e){return e.user.user})),c=function(e){return e.from===(null===s||void 0===s?void 0:s.email)};return function(e,t){var n=Object(r.useMemo)((function(){return P.a.firestore()}),[]),s=Object(l.b)(),c=Object(V.a)(a(56).default),i=Object(o.a)(c,1)[0];Object(r.useEffect)((function(){var a=function(){};if(e&&t){var r=t.email,c=e.user1.email===r?e.user2.email:r;(function(){var e=Object(B.a)(W.a.mark((function e(){var a,o,u;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.collection("dialogs").doc("".concat(r,"->").concat(c)),e.next=3,a.get();case 3:return e.sent.exists||(a=n.collection("dialogs").doc("".concat(c,"->").concat(r))),o=!0,u=a.collection("messages").onSnapshot({includeMetadataChanges:!0},(function(e){o?o=!1:e.docChanges().forEach((function(e){var a=e.doc.data();"added"===e.type&&(s(I({id:e.doc.id,from:a.from,text:a.message,createdAt:a.createdAt?a.createdAt:{seconds:(new Date).getTime()/1e3}})),a.from!==t.email&&i())}))}),(function(e){console.log(e)})),e.abrupt("return",u);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()().then((function(e){return a=e}))}return function(){a()}}),[n,null===e||void 0===e?void 0:e.user1,null===e||void 0===e?void 0:e.user2,t,s,i])}(t,s),Object(n.jsx)("div",{className:"chat__messages messages",children:t?t.messages.map((function(e,a){var r=!1;a<t.messages.length-1?c(t.messages[a+1])!==c(t.messages[a])&&(r=!0):a===t.messages.length-1&&(r=!0);var s=t.user1.email===e.from?t.user1:t.user2;return Object(n.jsx)(G,{isMy:c(e),isFirst:r,message:e,user:s},e.id)})):null})},z=(a(57),function(){return Object(n.jsx)("div",{className:"chat__no-dialog",children:"No dialog loaded..."})}),J=function(e){Object(u.a)(e);var t=Object(l.c)((function(e){return e.messages.dialog})),a=Object(l.c)((function(e){return e.messages.loading}));return Object(n.jsx)("div",{className:"chat",children:Object(n.jsxs)("div",{className:"chat__wrapper",children:[Object(n.jsx)("header",{className:"chat__header",children:Object(n.jsx)("h1",{className:"chat__title",children:"Chat"})}),Object(n.jsxs)("main",{className:"chat__main",children:[Object(n.jsx)(X,{}),t?Object(n.jsx)(R,{}):a?Object(n.jsx)("div",{className:"chat__loading",children:"Loading..."}):Object(n.jsx)(z,{})]})]})})},Z=(a(58),a.p+"static/media/nav-dialogs.0749145d.svg"),K=a.p+"static/media/nav-dialogs-active.aba96228.svg",q=a.p+"static/media/nav-find.61ccc58c.svg",Y=a.p+"static/media/nav-find-active.7e326660.svg",$=function(e){var t=e.active,a=e.onSetActive,r=function(e){return e===t?"nav__item nav__item_active":"nav__item"};return Object(n.jsx)("nav",{className:"nav",children:Object(n.jsx)("div",{className:"nav__wrapper",children:Object(n.jsxs)("ul",{className:"nav__list",children:[Object(n.jsx)("li",{className:r("Dialogs"),children:Object(n.jsx)("button",{className:"nav__btn",onClick:function(){return a("Dialogs")},children:"Dialogs"===t?Object(n.jsx)("img",{src:K,alt:"Dialogs",className:"nav__icon"}):Object(n.jsx)("img",{src:Z,alt:"Dialogs",className:"nav__icon"})})}),Object(n.jsx)("li",{className:r("Find"),children:Object(n.jsx)("button",{className:"nav__btn",onClick:function(){return a("Find")},children:"Find"===t?Object(n.jsx)("img",{src:Y,alt:"Find",className:"nav__icon"}):Object(n.jsx)("img",{src:q,alt:"Find",className:"nav__icon"})})})]})})})},ee=(a(59),function(e){var t,a=e.user,r=e.message,s=e.date,c=e.isActive,i=void 0!==c&&c,o=Object(l.b)(),u=Object(l.c)((function(e){return e.user.user}));return Object(n.jsxs)("button",{className:i?"dialog dialog_active":"dialog",onClick:function(){return e=null===u||void 0===u?void 0:u.email,t=a.email,void(e&&o(H(e,t)));var e,t},children:[Object(n.jsx)("div",{className:"dialog__image",style:{backgroundImage:"url(".concat(null===a||void 0===a?void 0:a.photoUrl,")")}}),Object(n.jsxs)("div",{className:"dialog__info",children:[Object(n.jsx)("div",{className:"dialog__name",children:a.name}),Object(n.jsx)("div",{className:"dialog__text",children:r})]}),Object(n.jsx)("time",{className:i?"dialog__time dialog__time_active":"dialog__time",children:(t=s.seconds,new Date(1e3*parseInt(t)).toLocaleDateString())})]})}),te=(a(60),a(28)),ae=s.a.createContext({}),ne=function(){return Object(r.useContext)(ae)},re=function(e){var t=e.auth,a=e.children;return Object(n.jsx)(ae.Provider,{value:t,children:a})},se=function(){return Object(n.jsx)("div",{className:"dialogs__no-dialogs",children:"No dialogs yet"})},ce=function(e){Object(u.a)(e);var t=Object(l.b)(),a=ne(),s=Object(te.a)(a),c=Object(o.a)(s,2),i=c[0],d=c[1],b=Object(l.c)((function(e){return e.dialogs.dialogs})),j=Object(l.c)((function(e){return e.dialogs.loading})),m=Object(l.c)((function(e){var t;return null===(t=e.messages.dialog)||void 0===t?void 0:t.id}));return Object(r.useEffect)((function(){i&&!d&&t(function(e){return{type:T,payload:e}}(i.email))}),[i,t]),Object(n.jsx)("div",{className:"chats__bottom dialogs",children:Object(n.jsx)("div",{className:"dialogs__wrapper",children:b.length?b.map((function(e){return Object(n.jsx)(ee,{user:e.anotherUser,message:e.messageText,date:e.messageDate,isActive:e.id===m},e.id)})):j?Object(n.jsx)("div",{className:"dialogs__loading",children:"Loading..."}):Object(n.jsx)(se,{})})})},ie=function(e){var t=e.onFilter,a=Object(r.useState)(""),s=Object(o.a)(a,2),c=s[0],i=s[1];return Object(n.jsx)("input",{type:"email",name:"email",className:"find__input",placeholder:"Type email here...",value:c,onChange:function(e){var a=e.target.value.trim();i(a),t(a)},autoComplete:"off"})},oe=(a(61),function(e){var t=e.user,a=Object(l.b)(),r=Object(l.c)((function(e){return e.user.user.email}));return Object(n.jsxs)("button",{className:"user-find",onClick:function(){var e,n;e=r,n=t.email,a(H(e,n))},children:[Object(n.jsx)("div",{className:"user-find__image",style:{backgroundImage:"url(".concat(null===t||void 0===t?void 0:t.photoUrl,")")}}),Object(n.jsx)("div",{className:"user-find__info",children:Object(n.jsx)("div",{className:"user-find__name",children:t.name})})]})}),ue=(a(62),function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.users.loading})),a=Object(l.c)((function(e){return e.users.users})),s=Object(r.useState)(a),c=Object(o.a)(s,2),i=c[0],u=c[1];return Object(r.useEffect)((function(){e({type:O})}),[e]),Object(r.useEffect)((function(){u(a)}),[a]),Object(n.jsxs)("div",{className:"find",children:[Object(n.jsx)(ie,{onFilter:function(e){u(a.filter((function(t){return t.email.includes(e)})))}}),Object(n.jsx)("div",{className:"find__wrapper",children:t?Object(n.jsx)("div",{className:"find__loading",children:"loading..."}):i.map((function(e){return Object(n.jsx)(oe,{user:e},e.email)}))})]})}),le=(a(63),function(e){Object(u.a)(e);var t=Object(l.c)((function(e){return e.user.user})),a=Object(r.useState)(!1),s=Object(o.a)(a,2),c=s[0],i=s[1],d=ne();return Object(n.jsxs)("div",{className:"chats__top profile",children:[Object(n.jsx)("div",{className:"profile__image",style:{backgroundImage:"url(".concat(null===t||void 0===t?void 0:t.photoUrl,")")}}),Object(n.jsx)("div",{className:"profile__details",children:Object(n.jsx)("p",{className:"profile__name",children:null===t||void 0===t?void 0:t.name})}),Object(n.jsxs)("button",{className:"profile__settings",onClick:function(){return i((function(e){return!e}))},children:[Object(n.jsx)("div",{className:"profile__settings-ellipse"}),Object(n.jsx)("div",{className:"profile__settings-ellipse"}),Object(n.jsx)("div",{className:"profile__settings-ellipse"})]}),c&&Object(n.jsx)("div",{className:"profile__settings-tab",children:Object(n.jsx)("button",{className:"profile__sign-out sign-out",onClick:function(){return d.signOut()},children:"Sign out"})})]})}),de=(a(64),function(e){Object(u.a)(e);var t=Object(r.useState)("Dialogs"),a=Object(o.a)(t,2),s=a[0],c=a[1];return Object(n.jsxs)("div",{className:"chats",children:[Object(n.jsx)(le,{}),Object(n.jsx)("div",{}),"Dialogs"===s?Object(n.jsx)(ce,{}):Object(n.jsx)(ue,{}),Object(n.jsx)($,{active:s,onSetActive:function(e){c(e)}})]})}),be=(a(65),a(66),a(68),function(e){Object(u.a)(e);var t=ne(),a=Object(l.b)();return Object(n.jsx)("div",{className:"sign-in",children:Object(n.jsx)("button",{className:"sign-in__btn",onClick:function(){a(function(e){return{type:m,payload:e}}(t))},children:"Sign in with Google"})})}),je=function(){var e=ne(),t=Object(te.a)(e),a=Object(o.a)(t,2),s=a[0],c=a[1],i=Object(l.b)();return Object(r.useEffect)((function(){s&&i(function(e){return{type:f,payload:e}}({name:s.displayName,email:s.email,photoUrl:s.photoURL}))}),[i,s]),Object(n.jsx)(n.Fragment,{children:s?Object(n.jsxs)("div",{className:"app",children:[Object(n.jsx)(de,{}),Object(n.jsx)(J,{})]}):c?Object(n.jsx)("div",{className:"app-loading",children:"Loading..."}):Object(n.jsx)(be,{})})},me=(a(69),a(18)),fe={dialogs:[],loading:!1,error:null},ge=a(39),pe=a(21),ve={dialog:null,loading:!1,error:null},Oe={status:!1,loading:!1,error:null},_e={user:null,loading:!1,error:null},xe={users:[],loading:!1,error:null},he=Object(me.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return{user:null,loading:!0,error:null};case b:return{user:t.payload,loading:!1,error:null};case j:return{user:null,loading:!1,error:t.payload};case f:return Object(pe.a)(Object(pe.a)({},e),{},{user:t.payload});default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return{users:[],loading:!0,error:null};case p:return{users:t.payload,loading:!1,error:null};case v:return{users:[],loading:!1,error:t.payload};default:return e}},messages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:return{dialog:null,loading:!0,error:null};case x:return{dialog:t.payload,loading:!1,error:null};case h:return{dialog:null,loading:!1,error:t.payload};case w:var a=null;return e.dialog&&(a=Object(pe.a)(Object(pe.a)({},e.dialog),{},{messages:[t.payload].concat(Object(ge.a)(e.dialog.messages))})),Object(pe.a)(Object(pe.a)({},e),{},{dialog:a});default:return e}},sendMessage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return{status:!1,loading:!0,error:null};case S:return{status:!0,loading:!1,error:null};case N:return{status:!1,loading:!1,error:t.payload};default:return e}},dialogs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case U:return{dialogs:[],loading:!0,error:null};case C:return{dialogs:t.payload,loading:!1,error:null};case A:return{dialogs:[],loading:!1,error:t.payload};default:return e}}}),ye=a(40),Ee=a(8),Se=a(34),Ne=a(37),ke=a(38),we=function(){function e(){Object(Ne.a)(this,e)}return Object(ke.a)(e,null,[{key:"signInWithGoogle",value:function(){var e=Object(B.a)(W.a.mark((function e(t){var a,n,r,s,c,i;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=P.a.firestore(),n=new P.a.auth.GoogleAuthProvider,e.next=4,t.signInWithPopup(n);case 4:if(r=e.sent,s=r.user){e.next=9;break}return t.signOut(),e.abrupt("return",null);case 9:if(!s){e.next=26;break}return c=a.collection("users").doc(null===s||void 0===s?void 0:s.email),e.next=13,c.get();case 13:if(e.sent.exists){e.next=26;break}return i={name:null===s||void 0===s?void 0:s.displayName,photoUrl:null===s||void 0===s?void 0:s.photoURL},e.prev=16,e.next=19,a.collection("users").doc(null===s||void 0===s?void 0:s.email).set(i);case 19:e.next=26;break;case 21:return e.prev=21,e.t0=e.catch(16),e.next=25,t.signOut();case 25:return e.abrupt("return",null);case 26:return e.abrupt("return",{name:null===s||void 0===s?void 0:s.displayName,email:null===s||void 0===s?void 0:s.email,photoUrl:null===s||void 0===s?void 0:s.photoURL});case 27:case"end":return e.stop()}}),e,null,[[16,21]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getUsers",value:function(){var e=Object(B.a)(W.a.mark((function e(){var t,a,n,r;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=P.a.firestore(),a=t.collection("users"),e.next=4,a.get();case 4:if(!(n=e.sent).empty){e.next=8;break}return console.log("No matching documents."),e.abrupt("return",[]);case 8:return r=[],n.forEach((function(e){r.push({email:e.id,name:e.data().name,photoUrl:e.data().photoUrl})})),e.abrupt("return",r);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getMessages",value:function(){var e=Object(B.a)(W.a.mark((function e(t){var a,n,r,s,c,i,o,u,l,d,b,j,m,f;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.from,n=t.to,r=P.a.firestore(),s=r.collection("users").doc(a),c=r.collection("users").doc(n),e.next=6,s.get();case 6:return i=e.sent,e.next=9,c.get();case 9:if(o=e.sent,i.exists&&o.exists){e.next=12;break}return e.abrupt("return",null);case 12:return u={email:i.id,name:i.data().name,photoUrl:i.data().photoUrl},l={email:o.id,name:o.data().name,photoUrl:o.data().photoUrl},d=r.collection("dialogs").doc("".concat(a,"->").concat(n)),e.next=17,d.get();case 17:if((b=e.sent).exists){e.next=25;break}return d=r.collection("dialogs").doc("".concat(n,"->").concat(a)),e.next=22,d.get();case 22:if((b=e.sent).exists){e.next=25;break}return e.abrupt("return",{user1:u,user2:l,messages:[],id:""});case 25:return e.next=27,d.collection("messages").orderBy("createdAt","desc");case 27:return j=e.sent,e.next=30,j.get();case 30:if(!(m=e.sent).empty){e.next=34;break}return console.log("No matching documents."),e.abrupt("return",{user1:u,user2:l,messages:[],id:""});case 34:return f=[],m.forEach((function(e){f.push({id:e.id,from:e.data().from,text:e.data().message,createdAt:e.data().createdAt})})),e.abrupt("return",{user1:u,user2:l,messages:f,id:b.id});case 37:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"addMessage",value:function(){var e=Object(B.a)(W.a.mark((function e(t){var a,n,r,s,c,i,o,u,l;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.from,n=t.to,r=t.message,s=P.a.firestore(),c=s.collection("users").doc(a),i=s.collection("users").doc(n),e.next=6,c.get();case 6:return o=e.sent,e.next=9,i.get();case 9:if(u=e.sent,o.exists&&u.exists){e.next=12;break}return e.abrupt("return",null);case 12:return l=s.collection("dialogs").doc("".concat(a,"->").concat(n)),e.next=15,l.get();case 15:if(e.sent.exists){e.next=31;break}return l=s.collection("dialogs").doc("".concat(n,"->").concat(a)),e.next=20,l.get();case 20:if(e.sent.exists){e.next=31;break}return e.prev=22,e.next=25,l.set({createdAt:P.a.firestore.FieldValue.serverTimestamp(),user1:a,user2:n});case 25:e.next=31;break;case 27:return e.prev=27,e.t0=e.catch(22),console.log(e.t0),e.abrupt("return",null);case 31:return e.next=33,l.collection("messages").add({createdAt:P.a.firestore.FieldValue.serverTimestamp(),from:a,message:r});case 33:return e.abrupt("return",{status:!0});case 34:case"end":return e.stop()}}),e,null,[[22,27]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getDialogs",value:function(){var e=Object(B.a)(W.a.mark((function e(t){var a,n,r,s,c,i;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=P.a.firestore(),n=[],r=!1,s=function(){var e=Object(B.a)(W.a.mark((function e(s,c){var i,o,u,l,d,b,j,m,f,g,p;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Object(Se.a)(s.docs),e.prev=1,i.s();case 3:if((o=i.n()).done){e.next=22;break}if((u=o.value).data().user1!==u.data().user2||!r){e.next=7;break}return e.abrupt("continue",20);case 7:return l=1===c?u.data().user2:u.data().user1,t===l&&(r=!0),d="",b=null,e.next=13,a.collection("dialogs").doc(u.id).collection("messages").orderBy("createdAt","desc").limit(1).get();case 13:j=e.sent,m=Object(Se.a)(j.docs);try{for(m.s();!(f=m.n()).done;)g=f.value,d=g.data().message,b=g.data().createdAt}catch(v){m.e(v)}finally{m.f()}return e.next=18,a.collection("users").doc(l).get();case 18:p=e.sent,n.push({id:u.id,messageText:d,messageDate:b,anotherUser:{email:p.id,name:p.data().name,photoUrl:p.data().photoUrl}});case 20:e.next=3;break;case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(1),i.e(e.t0);case 27:return e.prev=27,i.f(),e.finish(27);case 30:case"end":return e.stop()}}),e,null,[[1,24,27,30]])})));return function(t,a){return e.apply(this,arguments)}}(),c=a.collection("dialogs").where("user1","==",t),e.next=7,c.get();case 7:return i=e.sent,e.next=10,s(i,1);case 10:return c=a.collection("dialogs").where("user2","==",t),e.next=13,c.get();case 13:return i=e.sent,e.next=16,s(i,2);case 16:return e.abrupt("return",n);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Ue=W.a.mark(Ie),Ce=W.a.mark(He),Ae=W.a.mark(Le),Te=W.a.mark(Me),Fe=W.a.mark(Re),De=W.a.mark(Ge);function Ie(e){var t;return W.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(Ee.c)({type:d});case 3:return a.next=5,Object(Ee.b)(we.signInWithGoogle,e.payload);case 5:if(!(t=a.sent)){a.next=11;break}return a.next=9,Object(Ee.c)({type:b,payload:t});case 9:a.next=13;break;case 11:return a.next=13,Object(Ee.c)(F("not authenticated"));case 13:a.next=19;break;case 15:return a.prev=15,a.t0=a.catch(0),a.next=19,Object(Ee.c)(F(a.t0));case 19:case"end":return a.stop()}}),Ue,null,[[0,15]])}function He(){var e;return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(Ee.c)({type:g});case 3:return t.next=5,Object(Ee.b)(we.getUsers);case 5:return e=t.sent,t.next=8,Object(Ee.c)({type:p,payload:e});case 8:t.next=14;break;case 10:return t.prev=10,t.t0=t.catch(0),t.next=14,Object(Ee.c)(D(t.t0));case 14:case"end":return t.stop()}}),Ce,null,[[0,10]])}function Le(e){var t;return W.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(Ee.c)({type:_});case 3:return a.next=5,Object(Ee.b)(we.getMessages,e.payload);case 5:if(!(t=a.sent)){a.next=11;break}return a.next=9,Object(Ee.c)({type:x,payload:t});case 9:a.next=13;break;case 11:return a.next=13,Object(Ee.c)({type:h,payload:"couldn't find dialog"});case 13:a.next=19;break;case 15:return a.prev=15,a.t0=a.catch(0),a.next=19,Object(Ee.c)(D(a.t0));case 19:case"end":return a.stop()}}),Ae,null,[[0,15]])}function Me(e){return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(Ee.c)({type:E});case 3:return t.next=5,Object(Ee.b)(we.addMessage,e.payload);case 5:if(!t.sent){t.next=11;break}return t.next=9,Object(Ee.c)({type:S});case 9:t.next=13;break;case 11:return t.next=13,Object(Ee.c)(L("couldn't create message"));case 13:t.next=19;break;case 15:return t.prev=15,t.t0=t.catch(0),t.next=19,Object(Ee.c)(L(t.t0));case 19:case"end":return t.stop()}}),Te,null,[[0,15]])}function Re(e){var t;return W.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(Ee.c)({type:U});case 3:return a.next=5,Object(Ee.b)(we.getDialogs,e.payload);case 5:return t=a.sent,a.next=8,Object(Ee.c)({type:C,payload:t});case 8:a.next=14;break;case 10:return a.prev=10,a.t0=a.catch(0),a.next=14,Object(Ee.c)((n=a.t0,{type:A,payload:n}));case 14:case"end":return a.stop()}var n}),Fe,null,[[0,10]])}function Ge(){return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ee.a)([Object(Ee.d)(m,Ie),Object(Ee.d)(O,He),Object(Ee.d)(y,Le),Object(Ee.d)(k,Me),Object(Ee.d)(T,Re)]);case 2:case"end":return e.stop()}}),De)}var Qe=Object(ye.a)(),We=window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__();We=function(e){return e};var Be=Object(me.e)(he,Object(me.d)(Object(me.a)(Qe),We));Qe.run(Ge),P.a.initializeApp({apiKey:"AIzaSyA_r7iWuFU-LHEQ8W5-3nQWI4_ZMHpj41k",authDomain:"echat-56be5.firebaseapp.com",projectId:"echat-56be5",storageBucket:"echat-56be5.appspot.com",messagingSenderId:"875853984653",appId:"1:875853984653:web:fcdffab894b219f982c3c4"}),P.a.firestore().settings({cacheSizeBytes:P.a.firestore.CACHE_SIZE_UNLIMITED}),P.a.firestore().enablePersistence().catch((function(e){console.log(e),"failed-precondition"===e.code||e.code}));var Pe=P.a.auth();i.a.render(Object(n.jsx)(l.a,{store:Be,children:Object(n.jsx)(re,{auth:Pe,children:Object(n.jsx)(s.a.StrictMode,{children:Object(n.jsx)(je,{})})})}),document.getElementById("root"))}},[[70,1,2]]]);
//# sourceMappingURL=main.29a51b87.chunk.js.map