(this.webpackJsonpechat=this.webpackJsonpechat||[]).push([[0],{50:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},55:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/message.f1aedf04.mp3"},56:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){},64:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(3),s=n.n(r),c=n(25),i=n.n(c),o=n(13),u=n(6),l="FETCH_AUTH_REQUEST",d="FETCH_AUTH_SUCCESS",b="FETCH_AUTH_FAILURE",j="FETCH_AUTH",m="LOAD_USER",f="FETCH_USERS_REQUEST",g="FETCH_USERS_SUCCESS",p="FETCH_USERS_FAILURE",v="FETCH_USERS",_="FETCH_MESSAGES_REQUEST",x="FETCH_MESSAGES_SUCCESS",O="FETCH_MESSAGES_FAILURE",h="FETCH_MESSAGES",y="FETCH_SEND_MESSAGE_REQUEST",E="FETCH_SEND_MESSAGE_SUCCESS",S="FETCH_SEND_MESSAGE_FAILURE",N="FETCH_SEND_MESSAGE",k="ADD_MESSAGE",w="FETCH_DIALOGS_REQUEST",U="FETCH_DIALOGS_SUCCESS",C="FETCH_DIALOGS_FAILURE",A="FETCH_DIALOGS",T=function(e){return{type:b,payload:e}},F=function(e){return{type:p,payload:e}},D=function(e){return{type:k,payload:e}},I=function(e,t){return{type:h,payload:{from:e,to:t}}},H=function(e){return{type:S,payload:e}},L=function(e){return""!==e.trim()},M=(n(50),function(){var e=Object(u.c)((function(e){return e.messages.dialog})),t=Object(u.c)((function(e){return e.user.user})),n=Object(r.useState)(""),s=Object(o.a)(n,2),c=s[0],i=s[1],l=Object(u.b)();return Object(a.jsx)("form",{className:"chat__form",onSubmit:function(n){if(n.preventDefault(),L(c)){var a=e.user1.email===(null===t||void 0===t?void 0:t.email)?e.user2.email:e.user1.email;l(function(e,t,n){return{type:N,payload:{from:e,to:t,message:n}}}(t.email,a,c)),i("")}},children:Object(a.jsxs)("p",{className:"chat__fields",children:[Object(a.jsx)("input",{type:"text",name:"message",className:"chat__field",placeholder:"Type a new message...",value:c,onChange:function(e){return i(e.target.value)},autoComplete:"off"}),Object(a.jsx)("button",{type:"submit",className:"chat__submit",disabled:!L(c),children:"Send"})]})})}),R=(n(51),function(e){var t,n=e.isMy,r=void 0!==n&&n,s=e.isFirst,c=void 0!==s&&s,i=e.message,o=e.user;return Object(a.jsxs)("div",{className:function(){var e=["message"];return r||e.push("message_others"),c&&e.push("message_first"),e.join(" ")}(),children:[Object(a.jsx)("p",{className:r?"message__user":"message__user message__user_others",children:o.name}),Object(a.jsxs)("div",{className:"message__main",children:[Object(a.jsxs)("div",{className:r?"message__info":"message__info message__info_others",children:[Object(a.jsx)("p",{className:r?"message__text":"message__text message__text_others",children:i.text}),Object(a.jsx)("time",{className:r?"message__time":"message__time message__time_others",children:(t=i.createdAt.seconds,new Date(1e3*parseInt(t)).toLocaleString())})]}),Object(a.jsx)("div",{className:r?"message__image":"message__image message__image_others",style:{backgroundImage:"url(".concat(null===o||void 0===o?void 0:o.photoUrl,")")}})]})]})}),G=(n(52),n(9)),Q=n.n(G),W=n(19),B=n(12),P=(n(29),n(35)),V=function(){var e=Object(u.c)((function(e){return e.messages.dialog})),t=Object(u.c)((function(e){return e.user.user})),s=function(e){return e.from===(null===t||void 0===t?void 0:t.email)};return function(e,t){var a=Object(r.useMemo)((function(){return B.a.firestore()}),[]),s=Object(u.b)(),c=Object(P.a)(n(55).default),i=Object(o.a)(c,1)[0];Object(r.useEffect)((function(){var n=function(){};if(e&&t){var r=t.email,c=e.user1.email===r?e.user2.email:r;(function(){var e=Object(W.a)(Q.a.mark((function e(){var n,o,u;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.collection("dialogs").doc("".concat(r,"->").concat(c)),e.next=3,n.get();case 3:return e.sent.exists||(n=a.collection("dialogs").doc("".concat(c,"->").concat(r))),o=!0,u=n.collection("messages").onSnapshot({includeMetadataChanges:!0},(function(e){o?o=!1:e.docChanges().forEach((function(e){var n=e.doc.data();"added"===e.type&&(s(D({id:e.doc.id,from:n.from,text:n.message,createdAt:n.createdAt?n.createdAt:{seconds:(new Date).getTime()/1e3}})),n.from!==t.email&&i())}))}),(function(e){console.log(e)})),e.abrupt("return",u);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()().then((function(e){return n=e}))}return function(){n()}}),[a,null===e||void 0===e?void 0:e.user1,null===e||void 0===e?void 0:e.user2,t,s,i])}(e,t),Object(a.jsx)("div",{className:"chat__messages messages",children:e?e.messages.map((function(t,n){var r=!1;n<e.messages.length-1?s(e.messages[n+1])!==s(e.messages[n])&&(r=!0):n===e.messages.length-1&&(r=!0);var c=e.user1.email===t.from?e.user1:e.user2;return Object(a.jsx)(R,{isMy:s(t),isFirst:r,message:t,user:c},t.id)})):null})},X=(n(56),function(){return Object(a.jsx)("div",{className:"chat__no-dialog",children:"No dialog loaded..."})}),z=function(){var e=Object(u.c)((function(e){return e.messages.dialog})),t=Object(u.c)((function(e){return e.messages.loading}));return Object(a.jsx)("div",{className:"chat",children:Object(a.jsxs)("div",{className:"chat__wrapper",children:[Object(a.jsx)("header",{className:"chat__header",children:Object(a.jsx)("h1",{className:"chat__title",children:"Chat"})}),Object(a.jsxs)("main",{className:"chat__main",children:[Object(a.jsx)(V,{}),e?Object(a.jsx)(M,{}):t?Object(a.jsx)("div",{className:"chat__loading",children:"Loading..."}):Object(a.jsx)(X,{})]})]})})},J=(n(57),n.p+"static/media/nav-dialogs.0749145d.svg"),Z=n.p+"static/media/nav-dialogs-active.aba96228.svg",K=n.p+"static/media/nav-find.61ccc58c.svg",q=n.p+"static/media/nav-find-active.7e326660.svg",Y=function(e){var t=e.active,n=e.onSetActive,r=function(e){return e===t?"nav__item nav__item_active":"nav__item"};return Object(a.jsx)("nav",{className:"nav",children:Object(a.jsx)("div",{className:"nav__wrapper",children:Object(a.jsxs)("ul",{className:"nav__list",children:[Object(a.jsx)("li",{className:r("Dialogs"),children:Object(a.jsx)("button",{className:"nav__btn",onClick:function(){return n("Dialogs")},children:"Dialogs"===t?Object(a.jsx)("img",{src:Z,alt:"Dialogs",className:"nav__icon"}):Object(a.jsx)("img",{src:J,alt:"Dialogs",className:"nav__icon"})})}),Object(a.jsx)("li",{className:r("Find"),children:Object(a.jsx)("button",{className:"nav__btn",onClick:function(){return n("Find")},children:"Find"===t?Object(a.jsx)("img",{src:q,alt:"Find",className:"nav__icon"}):Object(a.jsx)("img",{src:K,alt:"Find",className:"nav__icon"})})})]})})})},$=(n(58),function(e){var t,n=e.user,r=e.message,s=e.date,c=e.isActive,i=void 0!==c&&c,o=Object(u.b)(),l=Object(u.c)((function(e){return e.user.user}));return Object(a.jsxs)("button",{className:i?"dialog dialog_active":"dialog",onClick:function(){return e=null===l||void 0===l?void 0:l.email,t=n.email,void(e&&o(I(e,t)));var e,t},children:[Object(a.jsx)("div",{className:"dialog__image",style:{backgroundImage:"url(".concat(null===n||void 0===n?void 0:n.photoUrl,")")}}),Object(a.jsxs)("div",{className:"dialog__info",children:[Object(a.jsx)("div",{className:"dialog__name",children:n.name}),Object(a.jsx)("div",{className:"dialog__text",children:r})]}),Object(a.jsx)("time",{className:i?"dialog__time dialog__time_active":"dialog__time",children:(t=s.seconds,new Date(1e3*parseInt(t)).toLocaleDateString())})]})}),ee=(n(59),n(27)),te=s.a.createContext({}),ne=function(){return Object(r.useContext)(te)},ae=function(e){var t=e.auth,n=e.children;return Object(a.jsx)(te.Provider,{value:t,children:n})},re=function(){return Object(a.jsx)("div",{className:"dialogs__no-dialogs",children:"No dialogs yet"})},se=function(){var e=Object(u.b)(),t=ne(),n=Object(ee.a)(t),s=Object(o.a)(n,2),c=s[0],i=s[1],l=Object(u.c)((function(e){return e.dialogs.dialogs})),d=Object(u.c)((function(e){return e.dialogs.loading})),b=Object(u.c)((function(e){var t;return null===(t=e.messages.dialog)||void 0===t?void 0:t.id}));return Object(r.useEffect)((function(){c&&!i&&e(function(e){return{type:A,payload:e}}(c.email))}),[c,e,i]),Object(a.jsx)("div",{className:"chats__bottom dialogs",children:Object(a.jsx)("div",{className:"dialogs__wrapper",children:l.length?l.map((function(e){return Object(a.jsx)($,{user:e.anotherUser,message:e.messageText,date:e.messageDate,isActive:e.id===b},e.id)})):d?Object(a.jsx)("div",{className:"dialogs__loading",children:"Loading..."}):Object(a.jsx)(re,{})})})},ce=function(e){var t=e.onFilter,n=Object(r.useState)(""),s=Object(o.a)(n,2),c=s[0],i=s[1];return Object(a.jsx)("input",{type:"email",name:"email",className:"find__input",placeholder:"Type email here...",value:c,onChange:function(e){var n=e.target.value.trim();i(n),t(n)},autoComplete:"off"})},ie=(n(60),function(e){var t=e.user,n=Object(u.b)(),r=Object(u.c)((function(e){return e.user.user.email}));return Object(a.jsxs)("button",{className:"user-find",onClick:function(){var e,a;e=r,a=t.email,n(I(e,a))},children:[Object(a.jsx)("div",{className:"user-find__image",style:{backgroundImage:"url(".concat(null===t||void 0===t?void 0:t.photoUrl,")")}}),Object(a.jsx)("div",{className:"user-find__info",children:Object(a.jsx)("div",{className:"user-find__name",children:t.name})})]})}),oe=(n(61),function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.users.loading})),n=Object(u.c)((function(e){return e.users.users})),s=Object(r.useState)(n),c=Object(o.a)(s,2),i=c[0],l=c[1];return Object(r.useEffect)((function(){e({type:v})}),[e]),Object(r.useEffect)((function(){l(n)}),[n]),Object(a.jsxs)("div",{className:"find",children:[Object(a.jsx)(ce,{onFilter:function(e){l(n.filter((function(t){return t.email.includes(e)})))}}),Object(a.jsx)("div",{className:"find__wrapper",children:t?Object(a.jsx)("div",{className:"find__loading",children:"loading..."}):i.map((function(e){return Object(a.jsx)(ie,{user:e},e.email)}))})]})}),ue=(n(62),function(){var e=Object(u.c)((function(e){return e.user.user})),t=Object(r.useState)(!1),n=Object(o.a)(t,2),s=n[0],c=n[1],i=ne();return Object(a.jsxs)("div",{className:"chats__top profile",children:[Object(a.jsx)("div",{className:"profile__image",style:{backgroundImage:"url(".concat(null===e||void 0===e?void 0:e.photoUrl,")")}}),Object(a.jsx)("div",{className:"profile__details",children:Object(a.jsx)("p",{className:"profile__name",children:null===e||void 0===e?void 0:e.name})}),Object(a.jsxs)("button",{className:"profile__settings",onClick:function(){return c((function(e){return!e}))},children:[Object(a.jsx)("div",{className:"profile__settings-ellipse"}),Object(a.jsx)("div",{className:"profile__settings-ellipse"}),Object(a.jsx)("div",{className:"profile__settings-ellipse"})]}),s&&Object(a.jsx)("div",{className:"profile__settings-tab",children:Object(a.jsx)("button",{className:"profile__sign-out sign-out",onClick:function(){return i.signOut()},children:"Sign out"})})]})}),le=(n(63),function(){var e=Object(r.useState)("Dialogs"),t=Object(o.a)(e,2),n=t[0],s=t[1];return Object(a.jsxs)("div",{className:"chats",children:[Object(a.jsx)(ue,{}),Object(a.jsx)("div",{}),"Dialogs"===n?Object(a.jsx)(se,{}):Object(a.jsx)(oe,{}),Object(a.jsx)(Y,{active:n,onSetActive:function(e){s(e)}})]})}),de=(n(64),n(65),n(67),function(){var e=ne(),t=Object(u.b)();return Object(a.jsx)("div",{className:"sign-in",children:Object(a.jsx)("button",{className:"sign-in__btn",onClick:function(){t(function(e){return{type:j,payload:e}}(e))},children:"Sign in with Google"})})}),be=function(){var e=ne(),t=Object(ee.a)(e),n=Object(o.a)(t,2),s=n[0],c=n[1],i=Object(u.b)();return Object(r.useEffect)((function(){s&&i(function(e){return{type:m,payload:e}}({name:s.displayName,email:s.email,photoUrl:s.photoURL}))}),[i,s]),Object(a.jsx)(a.Fragment,{children:s?Object(a.jsxs)("div",{className:"app",children:[Object(a.jsx)(le,{}),Object(a.jsx)(z,{})]}):c?Object(a.jsx)("div",{className:"app-loading",children:"Loading..."}):Object(a.jsx)(de,{})})},je=(n(68),n(17)),me={dialogs:[],loading:!1,error:null},fe=n(38),ge=n(20),pe={dialog:null,loading:!1,error:null},ve={status:!1,loading:!1,error:null},_e={user:null,loading:!1,error:null},xe={users:[],loading:!1,error:null},Oe=Object(je.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:return{user:null,loading:!0,error:null};case d:return{user:t.payload,loading:!1,error:null};case b:return{user:null,loading:!1,error:t.payload};case m:return Object(ge.a)(Object(ge.a)({},e),{},{user:t.payload});default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return{users:[],loading:!0,error:null};case g:return{users:t.payload,loading:!1,error:null};case p:return{users:[],loading:!1,error:t.payload};default:return e}},messages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:return{dialog:null,loading:!0,error:null};case x:return{dialog:t.payload,loading:!1,error:null};case O:return{dialog:null,loading:!1,error:t.payload};case k:var n=null;return e.dialog&&(n=Object(ge.a)(Object(ge.a)({},e.dialog),{},{messages:[t.payload].concat(Object(fe.a)(e.dialog.messages))})),Object(ge.a)(Object(ge.a)({},e),{},{dialog:n});default:return e}},sendMessage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return{status:!1,loading:!0,error:null};case E:return{status:!0,loading:!1,error:null};case S:return{status:!1,loading:!1,error:t.payload};default:return e}},dialogs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return{dialogs:[],loading:!0,error:null};case U:return{dialogs:t.payload,loading:!1,error:null};case C:return{dialogs:[],loading:!1,error:t.payload};default:return e}}}),he=n(39),ye=n(8),Ee=n(33),Se=n(36),Ne=n(37),ke=function(){function e(){Object(Se.a)(this,e)}return Object(Ne.a)(e,null,[{key:"signInWithGoogle",value:function(){var e=Object(W.a)(Q.a.mark((function e(t){var n,a,r,s,c,i;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=B.a.firestore(),a=new B.a.auth.GoogleAuthProvider,e.next=4,t.signInWithPopup(a);case 4:if(r=e.sent,s=r.user){e.next=9;break}return t.signOut(),e.abrupt("return",null);case 9:if(!s){e.next=26;break}return c=n.collection("users").doc(null===s||void 0===s?void 0:s.email),e.next=13,c.get();case 13:if(e.sent.exists){e.next=26;break}return i={name:null===s||void 0===s?void 0:s.displayName,photoUrl:null===s||void 0===s?void 0:s.photoURL},e.prev=16,e.next=19,n.collection("users").doc(null===s||void 0===s?void 0:s.email).set(i);case 19:e.next=26;break;case 21:return e.prev=21,e.t0=e.catch(16),e.next=25,t.signOut();case 25:return e.abrupt("return",null);case 26:return e.abrupt("return",{name:null===s||void 0===s?void 0:s.displayName,email:null===s||void 0===s?void 0:s.email,photoUrl:null===s||void 0===s?void 0:s.photoURL});case 27:case"end":return e.stop()}}),e,null,[[16,21]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getUsers",value:function(){var e=Object(W.a)(Q.a.mark((function e(){var t,n,a,r;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=B.a.firestore(),n=t.collection("users"),e.next=4,n.get();case 4:if(!(a=e.sent).empty){e.next=8;break}return console.log("No matching documents."),e.abrupt("return",[]);case 8:return r=[],a.forEach((function(e){r.push({email:e.id,name:e.data().name,photoUrl:e.data().photoUrl})})),e.abrupt("return",r);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getMessages",value:function(){var e=Object(W.a)(Q.a.mark((function e(t){var n,a,r,s,c,i,o,u,l,d,b,j,m,f;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.from,a=t.to,r=B.a.firestore(),s=r.collection("users").doc(n),c=r.collection("users").doc(a),e.next=6,s.get();case 6:return i=e.sent,e.next=9,c.get();case 9:if(o=e.sent,i.exists&&o.exists){e.next=12;break}return e.abrupt("return",null);case 12:return u={email:i.id,name:i.data().name,photoUrl:i.data().photoUrl},l={email:o.id,name:o.data().name,photoUrl:o.data().photoUrl},d=r.collection("dialogs").doc("".concat(n,"->").concat(a)),e.next=17,d.get();case 17:if((b=e.sent).exists){e.next=25;break}return d=r.collection("dialogs").doc("".concat(a,"->").concat(n)),e.next=22,d.get();case 22:if((b=e.sent).exists){e.next=25;break}return e.abrupt("return",{user1:u,user2:l,messages:[],id:""});case 25:return e.next=27,d.collection("messages").orderBy("createdAt","desc");case 27:return j=e.sent,e.next=30,j.get();case 30:if(!(m=e.sent).empty){e.next=34;break}return console.log("No matching documents."),e.abrupt("return",{user1:u,user2:l,messages:[],id:""});case 34:return f=[],m.forEach((function(e){f.push({id:e.id,from:e.data().from,text:e.data().message,createdAt:e.data().createdAt})})),e.abrupt("return",{user1:u,user2:l,messages:f,id:b.id});case 37:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"addMessage",value:function(){var e=Object(W.a)(Q.a.mark((function e(t){var n,a,r,s,c,i,o,u,l;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.from,a=t.to,r=t.message,s=B.a.firestore(),c=s.collection("users").doc(n),i=s.collection("users").doc(a),e.next=6,c.get();case 6:return o=e.sent,e.next=9,i.get();case 9:if(u=e.sent,o.exists&&u.exists){e.next=12;break}return e.abrupt("return",null);case 12:return l=s.collection("dialogs").doc("".concat(n,"->").concat(a)),e.next=15,l.get();case 15:if(e.sent.exists){e.next=31;break}return l=s.collection("dialogs").doc("".concat(a,"->").concat(n)),e.next=20,l.get();case 20:if(e.sent.exists){e.next=31;break}return e.prev=22,e.next=25,l.set({createdAt:B.a.firestore.FieldValue.serverTimestamp(),user1:n,user2:a});case 25:e.next=31;break;case 27:return e.prev=27,e.t0=e.catch(22),console.log(e.t0),e.abrupt("return",null);case 31:return e.next=33,l.collection("messages").add({createdAt:B.a.firestore.FieldValue.serverTimestamp(),from:n,message:r});case 33:return e.abrupt("return",{status:!0});case 34:case"end":return e.stop()}}),e,null,[[22,27]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getDialogs",value:function(){var e=Object(W.a)(Q.a.mark((function e(t){var n,a,r,s,c,i;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=B.a.firestore(),a=[],r=!1,s=function(){var e=Object(W.a)(Q.a.mark((function e(s,c){var i,o,u,l,d,b,j,m,f,g,p;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Object(Ee.a)(s.docs),e.prev=1,i.s();case 3:if((o=i.n()).done){e.next=22;break}if((u=o.value).data().user1!==u.data().user2||!r){e.next=7;break}return e.abrupt("continue",20);case 7:return l=1===c?u.data().user2:u.data().user1,t===l&&(r=!0),d="",b=null,e.next=13,n.collection("dialogs").doc(u.id).collection("messages").orderBy("createdAt","desc").limit(1).get();case 13:j=e.sent,m=Object(Ee.a)(j.docs);try{for(m.s();!(f=m.n()).done;)g=f.value,d=g.data().message,b=g.data().createdAt}catch(v){m.e(v)}finally{m.f()}return e.next=18,n.collection("users").doc(l).get();case 18:p=e.sent,a.push({id:u.id,messageText:d,messageDate:b,anotherUser:{email:p.id,name:p.data().name,photoUrl:p.data().photoUrl}});case 20:e.next=3;break;case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(1),i.e(e.t0);case 27:return e.prev=27,i.f(),e.finish(27);case 30:case"end":return e.stop()}}),e,null,[[1,24,27,30]])})));return function(t,n){return e.apply(this,arguments)}}(),c=n.collection("dialogs").where("user1","==",t),e.next=7,c.get();case 7:return i=e.sent,e.next=10,s(i,1);case 10:return c=n.collection("dialogs").where("user2","==",t),e.next=13,c.get();case 13:return i=e.sent,e.next=16,s(i,2);case 16:return e.abrupt("return",a);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),we=Q.a.mark(De),Ue=Q.a.mark(Ie),Ce=Q.a.mark(He),Ae=Q.a.mark(Le),Te=Q.a.mark(Me),Fe=Q.a.mark(Re);function De(e){var t;return Q.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(ye.c)({type:l});case 3:return n.next=5,Object(ye.b)(ke.signInWithGoogle,e.payload);case 5:if(!(t=n.sent)){n.next=11;break}return n.next=9,Object(ye.c)({type:d,payload:t});case 9:n.next=13;break;case 11:return n.next=13,Object(ye.c)(T("not authenticated"));case 13:n.next=19;break;case 15:return n.prev=15,n.t0=n.catch(0),n.next=19,Object(ye.c)(T(n.t0));case 19:case"end":return n.stop()}}),we,null,[[0,15]])}function Ie(){var e;return Q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(ye.c)({type:f});case 3:return t.next=5,Object(ye.b)(ke.getUsers);case 5:return e=t.sent,t.next=8,Object(ye.c)({type:g,payload:e});case 8:t.next=14;break;case 10:return t.prev=10,t.t0=t.catch(0),t.next=14,Object(ye.c)(F(t.t0));case 14:case"end":return t.stop()}}),Ue,null,[[0,10]])}function He(e){var t;return Q.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(ye.c)({type:_});case 3:return n.next=5,Object(ye.b)(ke.getMessages,e.payload);case 5:if(!(t=n.sent)){n.next=11;break}return n.next=9,Object(ye.c)({type:x,payload:t});case 9:n.next=13;break;case 11:return n.next=13,Object(ye.c)({type:O,payload:"couldn't find dialog"});case 13:n.next=19;break;case 15:return n.prev=15,n.t0=n.catch(0),n.next=19,Object(ye.c)(F(n.t0));case 19:case"end":return n.stop()}}),Ce,null,[[0,15]])}function Le(e){return Q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(ye.c)({type:y});case 3:return t.next=5,Object(ye.b)(ke.addMessage,e.payload);case 5:if(!t.sent){t.next=11;break}return t.next=9,Object(ye.c)({type:E});case 9:t.next=13;break;case 11:return t.next=13,Object(ye.c)(H("couldn't create message"));case 13:t.next=19;break;case 15:return t.prev=15,t.t0=t.catch(0),t.next=19,Object(ye.c)(H(t.t0));case 19:case"end":return t.stop()}}),Ae,null,[[0,15]])}function Me(e){var t;return Q.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(ye.c)({type:w});case 3:return n.next=5,Object(ye.b)(ke.getDialogs,e.payload);case 5:return t=n.sent,n.next=8,Object(ye.c)({type:U,payload:t});case 8:n.next=14;break;case 10:return n.prev=10,n.t0=n.catch(0),n.next=14,Object(ye.c)((a=n.t0,{type:C,payload:a}));case 14:case"end":return n.stop()}var a}),Te,null,[[0,10]])}function Re(){return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ye.a)([Object(ye.d)(j,De),Object(ye.d)(v,Ie),Object(ye.d)(h,He),Object(ye.d)(N,Le),Object(ye.d)(A,Me)]);case 2:case"end":return e.stop()}}),Fe)}var Ge=Object(he.a)(),Qe=window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__();Qe=function(e){return e};var We=Object(je.e)(Oe,Object(je.d)(Object(je.a)(Ge),Qe));Ge.run(Re),B.a.initializeApp({apiKey:"AIzaSyA_r7iWuFU-LHEQ8W5-3nQWI4_ZMHpj41k",authDomain:"echat-56be5.firebaseapp.com",projectId:"echat-56be5",storageBucket:"echat-56be5.appspot.com",messagingSenderId:"875853984653",appId:"1:875853984653:web:fcdffab894b219f982c3c4"}),B.a.firestore().settings({cacheSizeBytes:B.a.firestore.CACHE_SIZE_UNLIMITED}),B.a.firestore().enablePersistence().catch((function(e){console.log(e),"failed-precondition"===e.code||e.code}));var Be=B.a.auth();i.a.render(Object(a.jsx)(u.a,{store:We,children:Object(a.jsx)(ae,{auth:Be,children:Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(be,{})})})}),document.getElementById("root"))}},[[69,1,2]]]);
//# sourceMappingURL=main.a57400ba.chunk.js.map